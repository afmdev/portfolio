---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import FormattedDate from '../../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout>
	<main class="py-20 px-4 md:px-8">
		<section class="max-w-6xl mx-auto">
			<h1 class="text-4xl font-bold mb-8 text-center">Blog</h1>
			<ul class="grid grid-cols-1 md:grid-cols-2 gap-8 list-none">
				{
					posts.map((post) => (
						<li class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
							<a href={`/blog/${post.id}/`} class="block">
								{post.data.heroImage && (
									<Image width={720} height={360} src={post.data.heroImage} alt="" class="w-full h-48 object-cover" />
								)}
								<div class="p-6">
									<h4 class="title text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">{post.data.title}</h4>
									<p class="date text-gray-600 dark:text-gray-400">
										<FormattedDate date={post.data.pubDate} />
									</p>
								</div>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</BaseLayout>
